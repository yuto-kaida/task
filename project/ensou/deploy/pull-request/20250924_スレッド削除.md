## 変更内容
- テーブルのスレッドを削除する

### 変更項目
- ハンドラ
- ユースケース
- リポジトリ

### ハンドラ
- thread関連の型とメソッドを参照する

#### 型
- 削除対象のメソッドでしか利用されていない型を削除

#### メソッド

##### ダッシュボードで利用されている削除対象メソッド
- etSummaryOrganizationProjectsThisMonth
- getSummaryOrganizationUsersThisMonth

### ユースケース

#### 型

#### メソッド
- GetOrganizationProjectUsageThisMonth
- GetOrganizationUserUsageThisMonthListThisMonth


### リポジトリ

#### 型
- 削除対象のメソッドでしか利用されていない型を削除
- ThreadTable(schema.ts)

#### メソッド
- getOrganizationProjectUsageThisMonthListPerTime
##### getOrganizationUserUsageThisMonthListPerTime

## 1. パラメータの受け取り・期間の決定
- `params` から各種パラメータ（organizationID, perTimeUnit, startAt, endAt, order, orderBy, limit）を受け取る
- 集計期間（start, end）を決定
  - startAt 未指定なら `new Date(0)`（最古）
  - endAt 未指定なら `new Date()`（現在）

## 2. サブクエリによる集計
- **メッセージ数**: `msgAgg` サブクエリでプロジェクトごとのメッセージ数を集計
- **スレッド数**: `thAgg` サブクエリでプロジェクトごとのスレッド数を集計
- **ユニークユーザー数**: `userAgg` サブクエリでプロジェクトごとのユーザー数を集計
- **トークン数**: `tokAgg` サブクエリでプロジェクトごとのトークン数を集計

## 3. メインクエリで集計結果を結合
- `ProjectTable` をベースに、各サブクエリを `LEFT JOIN` で結合
- 各プロジェクトごとに
  - projectID
  - projectName
  - messageCount
  - threadCount
  - userCount
  - tokenCount
  を取得

## 4. ソート条件の決定
- orderBy（例: "message", "thread", "token", "user", "name"）と order（"asc" or "desc"）からソート式を決定

## 5. クエリ実行・件数制限
- `.orderBy(orderExpr)` でソート
- `.limit(params.limit ?? 1000)` で最大件数を制限

## 6. レスポンスデータの整形
- クエリ結果（rows）を projects 配列に変換
  - 各プロジェクトごとに usage オブジェクトを作成
    - messageCount, tokenCount, threadCount, userCount, usageTime
  - perTimeUnit, from, to なども付与
- 最終的な返却形式：
  ```typescript
  {
    organizationID: params.organizationID,
    projects: [...], // プロジェクトごとの集計データ
    perTimeUnit: params.perTimeUnit,
    from: start,
    to: end,
  }



#### 質問内容
- デベロッパーツールで呼び出しているメソッドを辿る方法(昨日の東さんの方法を再現)







## 変更目的
- ユーザー目線でスレッドという項目がわかりづらく、わかりやすいUIに変更するため

## 動作確認
- 管理者用サイドバーのダッシュボードが利用状況に変更されていることを確認

### before
- 管理者用サイドバーのアイテムが、`ユーザー``チーム``テンプレート`となっている

### after
- 管理者用サイドバーのアイテムが、`ユーザー``チーム``利用状況`となっている

## 特にレビューしてほしいところ
- サイドバーの内容が正しく更新されていること